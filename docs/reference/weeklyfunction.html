<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Weekly Function — weeklyfunction • hydroTSM</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Weekly Function — weeklyfunction"><meta property="og:description" content="Generic function for obtaining 52 weekly values of a zoo object, by applying any R function to ALL the values in the object belonging to each one of the 52 calendar weeks (starting on Monday)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hydroTSM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6-33</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/hzambran/hydroTSM/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Weekly Function</h1>
    
    <div class="hidden name"><code>weeklyfunction.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generic function for obtaining 52 weekly values of a zoo object, by applying any R function to ALL the values in the object belonging to each one of the 52 calendar weeks (starting on Monday).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">weeklyfunction</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">weeklyfunction</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0</span>, start<span class="op">=</span><span class="st">"00:00:00"</span>, </span>
<span>                                 start.fmt<span class="op">=</span> <span class="st">"%H:%M:%S"</span>, <span class="va">tz</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for zoo</span></span>
<span><span class="fu">weeklyfunction</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0</span>, start<span class="op">=</span><span class="st">"00:00:00"</span>, </span>
<span>                             start.fmt<span class="op">=</span> <span class="st">"%H:%M:%S"</span>, <span class="va">tz</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for data.frame</span></span>
<span><span class="fu">weeklyfunction</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0</span>, start<span class="op">=</span><span class="st">"00:00:00"</span>, </span>
<span>                        start.fmt<span class="op">=</span> <span class="st">"%H:%M:%S"</span>, <span class="va">tz</span>, dates<span class="op">=</span><span class="fl">1</span>, date.fmt<span class="op">=</span><span class="st">"%Y-%m-%d"</span>,</span>
<span>                        out.type<span class="op">=</span><span class="st">"data.frame"</span>, verbose<span class="op">=</span><span class="cn">TRUE</span>,<span class="va">...</span><span class="op">)</span></span>
<span>             </span>
<span><span class="co"># S3 method for matrix</span></span>
<span><span class="fu">weeklyfunction</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0</span>, start<span class="op">=</span><span class="st">"00:00:00"</span>, </span>
<span>                        start.fmt<span class="op">=</span> <span class="st">"%H:%M:%S"</span>, <span class="va">tz</span>, dates<span class="op">=</span><span class="fl">1</span>, date.fmt<span class="op">=</span><span class="st">"%Y-%m-%d"</span>,</span>
<span>                        out.type<span class="op">=</span><span class="st">"data.frame"</span>, verbose<span class="op">=</span><span class="cn">TRUE</span>,<span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>zoo, xts, data.frame or matrix object, with daily or monthly time series. <br>
Measurements at several gauging stations can be stored in a data.frame of matrix object, and in that case, each column of <code>x</code> represent the time series measured in each gauging station, and the column names of <code>x</code> have to correspond to the ID of each station (starting by a letter).</p></dd>

  <dt>FUN</dt>
<dd><p>Function that will be applied to ALL the values in <code>x</code> belonging to each one of the 12 months of the year (e.g., FUN can be some of <code>mean</code>, <code>sum</code>, <code>max</code>, <code>min</code>, <code>sd</code>).</p></dd>

  <dt>na.rm</dt>
<dd><p>Logical. Should missing values be removed? <br>
-) <kbd>TRUE</kbd> : the monthly values and FUN are computed considering only those values in <code>x</code> different from NA <br>
-) <kbd>FALSE</kbd>: if there is AT LEAST one NA within a month, the corresponding monthly value will be NA</p></dd>

  <dt>na.rm.max</dt>
<dd><p>Numeric in [0, 1]. It is used to define the maximum percentage of missing values allowed in each month to keep the weekly aggregated value in the output object of this function. In other words, if the percentage of missing values in a given month is larger or equal than <code>na.rm.max</code> the corresponding weekly value will be <code>NA</code>.</p></dd>

  <dt>start</dt>
<dd><p>character, indicating the starting time used for aggregating sub-daily time series into daily ones. It MUST be provided in the format specified by <code>start.fmt</code>. <br>
This value is used to define the time when a new day begins (e.g., for some rain gauge stations). <br>
-) All the values of <code>x</code> with a time attribute before <code>start</code> are considered as belonging to the day before the one indicated in the time attribute of those values. <br>
-) All the values of <code>x</code> with a time attribute equal to <code>start</code> are considered to be equal to <code>"00:00:00"</code> in the output zoo object. <br>
-) All the values of <code>x</code> with a time attribute after <code>start</code> are considered as belonging to the same day as the one indicated in the time attribute of those values. <br></p>
<p>It is useful when the daily values start at a time different from <code>"00:00:00"</code>. Use with caution. See examples.</p></dd>

  <dt>start.fmt</dt>
<dd><p>character indicating the format in which the time is provided in <code>start</code>, By default <code>date.fmt=%H:%M:%S</code>. See <code>format</code> in <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></code>.</p></dd>

  <dt>tz</dt>
<dd><p>character, with the specification of the time zone used in both <code>x</code> and <code>start</code>. System-specific (see time zones), but <code>""</code> is the current time zone, and <code>"GMT"</code> is UTC (Universal Time, Coordinated). See <code><a href="https://rdrr.io/r/base/timezones.html" class="external-link">Sys.timezone</a></code> and <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></code>. <br>
If <code>tz</code> is missing (the default), it is automatically set to the time zone used in <code>time(x)</code>. <br>
This argument can be used to force using the local time zone or any other time zone instead of UTC as time zone.</p></dd>

  <dt>dates</dt>
<dd><p>It is only used when <code>x</code> is not a zoo object. <br>
numeric, factor, Date indicating how to obtain the dates. <br>
If <code>dates</code> is a number (default), it indicates the index of the column in <code>x</code> that stores the dates <br>
If <code>dates</code> is a factor, it is converted into 'Date' class, using the date format specified by <code>date.fmt</code> <br>
If <code>dates</code> is already of Date class, the code verifies that the number of days in <code>dates</code> be equal to the number of elements in <code>x</code></p></dd>

  <dt>date.fmt</dt>
<dd><p>It is only used when <code>x</code> is not a zoo object. <br>
character indicating the format in which the dates are stored in <var>dates</var>, e.g. <kbd>%Y-%m-%d</kbd>. See <code>format</code> in <code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></code>. <br>
ONLY required when <code>class(dates)=="factor"</code> or <code>class(dates)=="numeric"</code>.</p></dd>

  <dt>out.type</dt>
<dd><p>It is only used when <code>x</code> is a matrix or data.frame. <br>
Character defining the desired type of output. Valid values are: <br>
-) <kbd>data.frame</kbd>: a data.frame, with 12 columns representing the months, and as many rows as gauging stations are included in <code>x</code> <br>
-) <kbd>db</kbd>        : a data.frame, with 4 columns will be produced. Useful for a posterior boxplot <br>
                 The first column ('StationID') will store the ID of the station,  <br>
                 The second column ('Year') will store the year, <br>
                 The third column ('Month') will store month,  <br>
                 The fourth column ('Value') will contain the monthly value corresponding to the three previous columns.</p></dd>

  <dt>verbose</dt>
<dd><p>Logical; if TRUE, progress messages are printed</p></dd>

  <dt>...</dt>
<dd><p>further arguments passed to or from other methods</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>When <code>x</code> is a zoo object, a numeric vector with 12 elements representing the computed monthly value for each month. <br></p>


<p>When <code>x</code> is a data.frame which columns represent measurements at different gauging stations, the resulting object is a data.frame with 12 columns and as many rows as gauging stations are in <code>x</code>, each row storing the computed 12 monthly value for each gauging station.
<!-- %%  If it is a LIST, use --></p>


<p><!-- %%  \item{comp1 }{Description of 'comp1'} --></p>


<p><!-- %%  \item{comp2 }{Description of 'comp2'} --></p>


<p><!-- %% ... --></p>


    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Mauricio Zambrano-Bigiarini, <a href="mailto:mzb.devel@gmail">mzb.devel@gmail</a></p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Due to the fact that <code>FUN</code> is applied over all the elements in <code>x</code> belonging to a given calendar month, its result will depend on the sampling frequency of <code>x</code> and the type of function provided by <code>FUN</code> (<b>special attention have to be put when <code>FUN=sum</code></b>)</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="annualfunction.html">annualfunction</a></code>, <code><a href="seasonalfunction.html">seasonalfunction</a></code>, <code><a href="dm2seasonal.html">dm2seasonal</a></code>, <code><a href="daily2monthly.html">daily2monthly</a></code>, <code><a href="daily2annual.html">daily2annual</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co">## Ex1: Computation of mean WEEKLY values from DAILY ts, removing any missing value in 'x'</span></span>
<span></span>
<span><span class="co"># Loading DAILY streamflows (3 years) at the station </span></span>
<span><span class="co"># Oca en Ona (Ebro River basin, Spain)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">OcaEnOnaQts</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">OcaEnOnaQts</span></span>
<span></span>
<span><span class="co">## Mean WEEKLY streamflows at station 'x'</span></span>
<span><span class="fu">weeklyfunction</span><span class="op">(</span><span class="va">x</span>, FUN<span class="op">=</span><span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">######################</span></span>
<span><span class="co">## Ex2: Computation of mean WEEKLY values from HOURLY ts, removing any missing value in 'x'</span></span>
<span></span>
<span><span class="co"># Loading HOURLY streamflows for the station Karamea at Gorge</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">KarameaAtGorgeQts</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">KarameaAtGorgeQts</span></span>
<span></span>
<span><span class="co">## Mean WEEKLY streamflows at station 'x'. Each day starts at 00:00:00</span></span>
<span><span class="fu">weeklyfunction</span><span class="op">(</span><span class="va">x</span>, FUN<span class="op">=</span><span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">######################</span></span>
<span><span class="co">## Ex3: Computation of mean WEEKLY values from HOURLY ts, removing any missing value in 'x'</span></span>
<span><span class="co">##      and starting each day at 08:00:00</span></span>
<span></span>
<span><span class="co"># Loading HOURLY streamflows for the station Karamea at Gorge</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">KarameaAtGorgeQts</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">KarameaAtGorgeQts</span></span>
<span></span>
<span><span class="co">## Mean WEEKLY streamflows at station 'x'. Each day starts at 00:00:00</span></span>
<span><span class="fu">weeklyfunction</span><span class="op">(</span><span class="va">x</span>, FUN<span class="op">=</span><span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, start<span class="op">=</span><span class="st">"00:00:00"</span><span class="op">)</span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Mauricio Zambrano-Bigiarini.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

