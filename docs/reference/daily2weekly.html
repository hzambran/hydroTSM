<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Daily -&gt; Weekly — daily2weekly • hydroTSM</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Daily -&gt; Weekly — daily2weekly"><meta property="og:description" content="Generic function for transforming a DAILY (or sub-daily) regular time series into a WEEKLY one"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hydroTSM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6-33</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/hydroTSM_Vignette-knitr.html">Tutorial for Introductory Analysis of Daily Precipitation Data with `hydroTSM`</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/hzambran/hydroTSM/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Daily -&gt; Weekly</h1>
    
    <div class="hidden name"><code>daily2weekly.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generic function for transforming a DAILY (or sub-daily) regular time series into a WEEKLY one</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">daily2weekly</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">daily2weekly</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for zoo</span></span>
<span><span class="fu">daily2weekly</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for data.frame</span></span>
<span><span class="fu">daily2weekly</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0</span>, dates<span class="op">=</span><span class="fl">1</span>, </span>
<span>        date.fmt <span class="op">=</span> <span class="st">"%Y-%m-%d"</span>, out.type <span class="op">=</span> <span class="st">"data.frame"</span>, out.fmt<span class="op">=</span><span class="st">"numeric"</span>, </span>
<span>        verbose<span class="op">=</span><span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for matrix</span></span>
<span><span class="fu">daily2weekly</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0</span>, dates<span class="op">=</span><span class="fl">1</span>, </span>
<span>        date.fmt <span class="op">=</span> <span class="st">"%Y-%m-%d"</span>, out.type <span class="op">=</span> <span class="st">"data.frame"</span>, out.fmt<span class="op">=</span><span class="st">"numeric"</span>, </span>
<span>        verbose<span class="op">=</span><span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>zoo, data.frame or matrix object, with (sub)daily time series. <br>
Measurements at several gauging stations can be stored in a data.frame or matrix object, and in that case, each column of <code>x</code> represents the time series measured in each gauging station, and the column names of <code>x</code> have to correspond to the ID of each station (starting by a letter).</p></dd>

  <dt>FUN</dt>
<dd><p>Function that have to be applied for transforming from daily to weekly time step (e.g., for precipitation <code>FUN=sum</code> and for temperature and streamflow ts <code>FUN=mean</code>). <br></p>
<p><code>FUN</code> MUST accept the <code>na.rm</code> argument, because <code>na.rm</code> is passed to <code>FUN</code>.</p></dd>

  <dt>na.rm</dt>
<dd><p>Logical. Should missing values be removed? <br>
-) <kbd>TRUE</kbd> : the weekly values are computed only for weeks with a percentage of missing values less than <code>na.rm.max</code> <br>
-) <kbd>FALSE</kbd>: if there is AT LEAST one NA within a month, the corresponing weekly values in the output object will be <code>NA</code>.</p></dd>

  <dt>na.rm.max</dt>
<dd><p>Numeric in [0, 1]. It is used to define the maximum percentage of missing values allowed in each month to keep the weekly aggregated value in the output object of this function. In other words, if the percentage of missing values in a given month is larger or equal than <code>na.rm.max</code> the corresponding weekly value will be <code>NA</code>.</p></dd>

  <dt>dates</dt>
<dd><p>numeric, factor or Date object indicating how to obtain the dates for each gauging station <br>
If <code>dates</code> is a number (default), it indicates the index of the column in <var>x</var> that stores the dates <br>
If <code>dates</code> is a factor, it is converted into Date class, using the date format specified by <code>date.fmt</code>  <br>
If <code>dates</code> is already of Date class, the code verifies that the number of days on it be equal to the number of elements in <code>x</code></p></dd>

  <dt>date.fmt</dt>
<dd><p>character indicating the format in which the dates are stored in <var>dates</var>, e.g. <kbd>%Y-%m-%d</kbd>. See <code>format</code> in <code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></code>. <br>
ONLY required when <code>class(dates)=="factor"</code> or <code>class(dates)=="numeric"</code>.</p></dd>

  <dt>out.type</dt>
<dd><p>Character that defines the desired type of output. Valid values are:  <br>
-) <kbd>data.frame</kbd>: a data.frame, with as many columns as stations are included in <code>x</code>, and row names indicating the month and year for each value. <br>
-) <kbd>db</kbd>        : a data.frame, with 4 columns will be produced. <br>
                 The first column (StationID) stores the ID of the station, <br>
                 The second column (Year) stores the year <br>
                 The third column (Month) stores the Month  <br>
                 The fourth column (Value) stores the numerical values corresponding to the values specified in the three previous columns. <br></p></dd>

  <dt>out.fmt</dt>
<dd><p>OPTIONAL. Only used when <code>x</code> is a matrix or data.frame object /cr
character, for selecting if the result will be a matrix/data.frame or a zoo object. Valid values are: <kbd>numeric</kbd>, <kbd>zoo</kbd>.</p></dd>

  <dt>verbose</dt>
<dd><p>logical; if TRUE, progress messages are printed</p></dd>

  <dt>...</dt>
<dd><p>arguments additional to <code>na.rm</code> passed to <code>FUN</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a zoo object with weekly time frequency</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Mauricio Zambrano-Bigiarini, <a href="mailto:mzb.devel@gmail">mzb.devel@gmail</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="cmv.html">cmv</a></code>, <code><a href="subhourly2hourly.html">subhourly2hourly</a></code>, <code><a href="daily2monthly.html">daily2monthly</a></code>, <code><a href="daily2annual.html">daily2annual</a></code>, <code><a href="subdaily2daily.html">subdaily2daily</a></code>, <code><a href="weeklyfunction.html">weeklyfunction</a></code>, <code><a href="hydroplot.html">hydroplot</a></code>, <code><a href="vector2zoo.html">vector2zoo</a></code>, <code><a href="izoo2rzoo.html">izoo2rzoo</a></code>, <code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co">######################</span></span>
<span><span class="co">## Ex1: Computation of weekly values, removing any missing value in 'x'</span></span>
<span></span>
<span><span class="co"># Loading the DAILY precipitation data at SanMartino</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">SanMartinoPPts</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">SanMartinoPPts</span></span>
<span></span>
<span><span class="co"># Subsetting 'x' to its first three weeks (Jan/1921 - Mar/1921)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/window.html" class="external-link">window</a></span><span class="op">(</span><span class="va">x</span>, end<span class="op">=</span><span class="st">"1921-03-31"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Transforming into NA the 10% of values in 'x'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="co"># for reproducible results</span></span>
<span><span class="va">n</span>           <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">n.nas</span>       <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">*</span><span class="va">n</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">na.index</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">n</span>, <span class="va">n.nas</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="va">na.index</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="co">## Agreggating from Daily to Weekly, removing any missing value in 'x'</span></span>
<span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu">daily2weekly</span><span class="op">(</span><span class="va">x</span>, FUN<span class="op">=</span><span class="va">sum</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">######################</span></span>
<span><span class="co">## Ex2: Computation of Weekly values only when the percentage of NAs in each</span></span>
<span><span class="co">#       week is lower than a user-defined percentage (10% in this example).</span></span>
<span></span>
<span><span class="co"># Loading the DAILY precipitation data at SanMartino</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">SanMartinoPPts</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">SanMartinoPPts</span></span>
<span></span>
<span><span class="co"># Subsetting 'x' to its first three weeks (Jan/1921 - Mar/1921)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/window.html" class="external-link">window</a></span><span class="op">(</span><span class="va">x</span>, end<span class="op">=</span><span class="st">"1921-03-31"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Transforming into NA the 10% of values in 'x'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="co"># for reproducible results</span></span>
<span><span class="va">n</span>           <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">n.nas</span>       <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">*</span><span class="va">n</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">na.index</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">n</span>, <span class="va">n.nas</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="va">na.index</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="co">## Daily to Weekly, only for weeks with less than 10% of missing values</span></span>
<span><span class="va">w2</span> <span class="op">&lt;-</span> <span class="fu">daily2weekly</span><span class="op">(</span><span class="va">x</span>, FUN<span class="op">=</span><span class="va">sum</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Verifying that the weeks 01, 02, 06, 08, 10, 11, 12 of 'x' had 10% or more of missing values</span></span>
<span><span class="fu"><a href="cmv.html">cmv</a></span><span class="op">(</span><span class="va">x</span>, tscale<span class="op">=</span><span class="st">"weekly"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">######################</span></span>
<span><span class="co">## Ex3: Computation of Weekly values in a two-column zoo object, </span></span>
<span><span class="co">##      only when the percentage of NAs in each week is lower than a user-defined </span></span>
<span><span class="co">##      percentage (10% in this example).</span></span>
<span></span>
<span><span class="co"># Loading the DAILY precipitation data at SanMartino</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">SanMartinoPPts</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">SanMartinoPPts</span></span>
<span></span>
<span><span class="co"># Subsetting 'x' to its first three weeks (Jan/1921 - Mar/1921)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/window.html" class="external-link">window</a></span><span class="op">(</span><span class="va">x</span>, end<span class="op">=</span><span class="st">"1921-03-31"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Transforming into NA the 10% of values in 'x'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="co"># for reproducible results</span></span>
<span><span class="va">n</span>           <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">n.nas</span>       <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">*</span><span class="va">n</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">na.index</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">n</span>, <span class="va">n.nas</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="va">na.index</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="co">## Creating a two-column zoo object</span></span>
<span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">x</span>, y<span class="op">=</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Daily to Weekly, only for weeks with less than 10% of missing values</span></span>
<span><span class="va">w2</span> <span class="op">&lt;-</span> <span class="fu">daily2weekly</span><span class="op">(</span><span class="va">X</span>, FUN<span class="op">=</span><span class="va">sum</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Verifying that the weeks 01, 02, 06, 08, 10, 11, 12 of 'x' had 10% or more of missing values</span></span>
<span><span class="fu"><a href="cmv.html">cmv</a></span><span class="op">(</span><span class="va">X</span>, tscale<span class="op">=</span><span class="st">"weekly"</span><span class="op">)</span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Mauricio Zambrano-Bigiarini.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

