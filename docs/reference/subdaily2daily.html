<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Sub-daily -&gt; Daily — subdaily2daily • hydroTSM</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Sub-daily -&gt; Daily — subdaily2daily"><meta property="og:description" content="Generic function for transforming a Sub-DAILY time series into a DAILY one"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hydroTSM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6-33</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/hzambran/hydroTSM/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Sub-daily -&gt; Daily</h1>
    
    <div class="hidden name"><code>subdaily2daily.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generic function for transforming a Sub-DAILY time series into a DAILY one</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">subdaily2daily</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">subdaily2daily</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0</span>,</span>
<span>                       start<span class="op">=</span><span class="st">"00:00:00"</span>, start.fmt<span class="op">=</span> <span class="st">"%H:%M:%S"</span>, <span class="va">tz</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for zoo</span></span>
<span><span class="fu">subdaily2daily</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0</span>,</span>
<span>                       start<span class="op">=</span><span class="st">"00:00:00"</span>, start.fmt<span class="op">=</span> <span class="st">"%H:%M:%S"</span>, <span class="va">tz</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for data.frame</span></span>
<span><span class="fu">subdaily2daily</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0</span>,</span>
<span>           start<span class="op">=</span><span class="st">"00:00:00"</span>, start.fmt<span class="op">=</span> <span class="st">"%H:%M:%S"</span>, <span class="va">tz</span>,</span>
<span>           dates<span class="op">=</span><span class="fl">1</span>, date.fmt<span class="op">=</span><span class="st">"%Y-%m-%d %H:%M:%S"</span>, out.fmt<span class="op">=</span><span class="st">"zoo"</span>, </span>
<span>           verbose<span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for matrix</span></span>
<span><span class="fu">subdaily2daily</span><span class="op">(</span><span class="va">x</span>, <span class="va">FUN</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0</span>,</span>
<span>           start<span class="op">=</span><span class="st">"00:00:00"</span>, start.fmt<span class="op">=</span> <span class="st">"%H:%M:%S"</span>, <span class="va">tz</span>,</span>
<span>           dates<span class="op">=</span><span class="fl">1</span>, date.fmt<span class="op">=</span><span class="st">"%Y-%m-%d %H:%M:%S"</span>, out.fmt<span class="op">=</span><span class="st">"zoo"</span>, </span>
<span>           verbose<span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>zoo, data.frame or matrix object, with sub-daily time series. <br>
Measurements at several gauging stations can be stored in a data.frame or matrix object, and in that case, each column of <code>x</code> represents the time series measured in each gauging station, and the column names of <code>x</code> should correspond to the ID of each station (starting by a letter).</p></dd>

 <dt>FUN</dt>
<dd><p>Function that have to be applied for aggregating from sub-daily into daily time step (e.g., for precipitation <code>FUN=sum</code> and for temperature and streamflows ts <code>FUN=mean</code>). <br></p>
<p><code>FUN</code> MUST accept the <code>na.rm</code> argument, because <code>na.rm</code> is passed to <code>FUN</code>.</p></dd>

  <dt>na.rm</dt>
<dd><p>Logical. Should missing values be removed? <br>
-) <kbd>TRUE</kbd> : the daily values are computed only for days with a percentage of missing values less than <code>na.rm.max</code> <br>
-) <kbd>FALSE</kbd>: if there is AT LEAST one NA within a day, the corresponing daily value in the output object will be <code>NA</code>.</p></dd>

  <dt>na.rm.max</dt>
<dd><p>Numeric in [0, 1]. It is used to define the maximum percentage of missing values allowed in each day to keep the daily aggregated value in the output object of this function. In other words, if the percentage of missing values in a given day is larger or equal than <code>na.rm.max</code> the corresponding daily value will be <code>NA</code>.</p></dd>

  <dt>start</dt>
<dd><p>character, indicating the starting time used for aggregating sub-daily time series into daily ones. It MUST be provided in the format specified by <code>start.fmt</code>. <br>
This value is used to define the time when a new day begins (e.g., for some rain gauge stations). <br>
-) All the values of <code>x</code> with a time attribute before <code>start</code> are considered as belonging to the day before the one indicated in the time attribute of those values. <br>
-) All the values of <code>x</code> with a time attribute equal to <code>start</code> are considered to be equal to <code>"00:00:00"</code> in the output zoo object. <br>
-) All the values of <code>x</code> with a time attribute after <code>start</code> are considered as belonging to the same day as the one indicated in the time attribute of those values. <br></p>
<p>It is useful when the daily values start at a time different from <code>"00:00:00"</code>. Use with caution. See examples.</p></dd>

  <dt>start.fmt</dt>
<dd><p>character indicating the format in which the time is provided in <code>start</code>, By default <code>date.fmt=%H:%M:%S</code>. See <code>format</code> in <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></code>.</p></dd>

  <dt>tz</dt>
<dd><p>character, with the specification of the time zone used in both <code>x</code> and <code>start</code>. System-specific (see time zones), but <code>""</code> is the current time zone, and <code>"GMT"</code> is UTC (Universal Time, Coordinated). See <code><a href="https://rdrr.io/r/base/timezones.html" class="external-link">Sys.timezone</a></code> and <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></code>. <br>
If <code>tz</code> is missing (the default), it is automatically set to the time zone used in <code>time(x)</code>. <br>
This argument can be used to force using the local time zone or any other time zone instead of UTC as time zone.</p></dd>

  <dt>dates</dt>
<dd><p>numeric, factor, POSIXct or POSIXt object indicating how to obtain the dates and times for each column of <code>x</code> (e.g., gauging station) <br>
If <code>dates</code> is a number, it indicates the index of the column in <code>x</code> that stores the date and times <br>
If <code>dates</code> is a factor, it is converted into POSIXct class, using the date format specified by <code>date.fmt</code>  <br>
If <code>dates</code> is already of POSIXct or POSIXt class, the code verifies that the number of elements on it be equal to the number of elements in <code>x</code></p></dd>

  <dt>date.fmt</dt>
<dd><p>character indicating the format in which the dates are stored in <code>dates</code>, By default <code>date.fmt=%Y-%m-%d %H:%M:%S</code>. See <code>format</code> in <code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></code>. <br>
ONLY required when <code>class(dates)=="factor"</code> or <code>class(dates)=="numeric"</code>.</p></dd>

  <dt>out.fmt</dt>
<dd><p>OPTIONAL. Only used when <code>x</code> is a matrix or data.frame object /cr
character, for selecting if the result will be a matrix/data.frame or a zoo object. Valid values are: <kbd>numeric</kbd>, <kbd>zoo</kbd> (default)</p></dd>

  <dt>verbose</dt>
<dd><p>logical; if TRUE, progress messages are printed</p></dd>

  <dt>...</dt>
<dd><p>arguments additional to <code>na.rm</code> passed to <code>FUN</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a zoo object with daily time series</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Mauricio Zambrano-Bigiarini, <a href="mailto:mzb.devel@gmail">mzb.devel@gmail</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="subhourly2hourly.html">subhourly2hourly</a></code>, <code><a href="daily2monthly.html">subdaily2monthly</a></code>, 
<code><a href="daily2annual.html">subdaily2annual</a></code>, <code><a href="dm2seasonal.html">subdaily2seasonal</a></code>, 
<code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></code>, <code><a href="dm2seasonal.html">dm2seasonal</a></code>, <code><a href="monthlyfunction.html">monthlyfunction</a></code>, 
<code><a href="seasonalfunction.html">seasonalfunction</a></code>, <code><a href="hydroplot.html">hydroplot</a></code>, 
<code><a href="vector2zoo.html">vector2zoo</a></code>, <code><a href="izoo2rzoo.html">izoo2rzoo</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co">## Ex1: Computation of daily values, removing any missing value in 'x'</span></span>
<span></span>
<span><span class="co">## Loading the time series of hourly streamflows for the station Karamea at Gorge</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">KarameaAtGorgeQts</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">KarameaAtGorgeQts</span></span>
<span></span>
<span><span class="co"># Plotting the hourly streamflow values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetting 'x' to its first three days (01/Jan/1980 - 03/Jan/1980)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/window.html" class="external-link">window</a></span><span class="op">(</span><span class="va">x</span>, end<span class="op">=</span><span class="st">"1980-01-03 23:59:00"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Transforming into NA the 10% of values in 'x'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="co"># for reproducible results</span></span>
<span><span class="va">n</span>           <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">n.nas</span>       <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">*</span><span class="va">n</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">na.index</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">n</span>, <span class="va">n.nas</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="va">na.index</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="co">## Agreggating from Sub-Daily to Daily, removing any missing value in 'x'</span></span>
<span><span class="op">(</span> <span class="va">d1</span> <span class="op">&lt;-</span> <span class="fu">subdaily2daily</span><span class="op">(</span><span class="va">x</span>, FUN<span class="op">=</span><span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">## Ex2: Computation of daily values, removing any missing value in 'x' and</span></span>
<span><span class="co">##      considering that the new day starts at 08:00:00 local time</span></span>
<span><span class="op">(</span> <span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu">subdaily2daily</span><span class="op">(</span><span class="va">x</span>, FUN<span class="op">=</span><span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, start<span class="op">=</span><span class="st">"08:00:00"</span><span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span><span class="co">## Ex3: Computation of daily values, removing any missing value in 'x' and</span></span>
<span><span class="co">##      considering that the new day starts at 08:00:00, and forcing </span></span>
<span><span class="co">#       UTC both for 'x' and 'start'</span></span>
<span><span class="op">(</span> <span class="va">d3</span> <span class="op">&lt;-</span> <span class="fu">subdaily2daily</span><span class="op">(</span><span class="va">x</span>, FUN<span class="op">=</span><span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, start<span class="op">=</span><span class="st">"08:00:00"</span>, tz<span class="op">=</span><span class="st">"UTC"</span><span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span><span class="co">######################</span></span>
<span><span class="co">## Ex4: Compuation of daily values only when the percentage of NAs in each</span></span>
<span><span class="co">#       day is lower than a user-defined percentage (10% in this example).</span></span>
<span><span class="op">(</span> <span class="va">d4</span> <span class="op">&lt;-</span> <span class="fu">subdaily2daily</span><span class="op">(</span><span class="va">x</span>, FUN<span class="op">=</span><span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, na.rm.max<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span> <span class="op">)</span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Mauricio Zambrano-Bigiarini.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

